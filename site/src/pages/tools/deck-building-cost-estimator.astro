---
import ToolLayout from '../../components/ToolLayout.astro';
---
<ToolLayout title="Deck Building Cost Estimator" description="Calculate the cost to build a new deck based on size, material, and features." icon="ðŸªµ" category="Cost Estimators" categorySlug="cost-estimators">
  <div slot="calculator">
    <div class="grid md:grid-cols-2 gap-6">
      <div><label class="block text-sm font-semibold text-[#1B4965] mb-1">Deck Size (sq ft)</label><input type="number" id="area" value="300" min="10" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#FF6B35] focus:border-transparent" /></div>
      <div><label class="block text-sm font-semibold text-[#1B4965] mb-1">Decking Material</label>
        <select id="mat" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#FF6B35]">
          <option value="15,25" selected>Pressure-Treated Wood ($15-25/sqft)</option>
          <option value="20,35">Cedar ($20-35/sqft)</option>
          <option value="30,50">Composite (Trex, etc.) ($30-50/sqft)</option>
          <option value="25,45">Redwood ($25-45/sqft)</option>
          <option value="40,70">PVC/Cellular ($40-70/sqft)</option>
          <option value="45,80">Hardwood (Ipe) ($45-80/sqft)</option>
        </select>
      </div>
      <div><label class="block text-sm font-semibold text-[#1B4965] mb-1">Height Above Ground</label>
        <select id="height" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#FF6B35]">
          <option value="0">Ground level (on grade)</option>
          <option value="500" selected>Standard (1-4 ft, with stairs)</option>
          <option value="2000">Elevated (4-8 ft, multi-level)</option>
          <option value="5000">High (8+ ft, requires engineering)</option>
        </select>
      </div>
      <div><label class="block text-sm font-semibold text-[#1B4965] mb-1">Railing</label>
        <select id="rail" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#FF6B35]">
          <option value="0">None</option>
          <option value="20,40" selected>Wood ($20-40/lin ft)</option>
          <option value="30,60">Composite ($30-60/lin ft)</option>
          <option value="75,150">Cable/Glass ($75-150/lin ft)</option>
        </select>
      </div>
    </div>
    <button onclick="calc()" class="mt-6 bg-[#FF6B35] hover:bg-[#e55a2b] text-white font-semibold px-8 py-3 rounded-lg transition-colors w-full md:w-auto">Estimate Deck Cost</button>
    <div id="result" class="mt-6 hidden"><div class="bg-[#1B4965]/5 rounded-xl p-6"><h3 class="font-bold text-[#1B4965] text-lg mb-3">Estimated Deck Cost</h3><div id="res"></div></div></div>
  </div>
  <Fragment slot="content">
    <h2>Average Deck Building Costs</h2>
    <p>A basic 300 sq ft pressure-treated deck costs <strong>$5,000-$10,000</strong>. Composite decks run $9,000-$18,000 for the same size but last 25-50 years with minimal maintenance.</p>
    <h2>Cost Factors</h2>
    <ul>
      <li><strong>Material</strong>: 50-60% of total cost</li>
      <li><strong>Labor</strong>: 30-40% (DIY saves significantly)</li>
      <li><strong>Permits</strong>: $200-500 in most areas</li>
      <li><strong>Height</strong>: Elevated decks need more structural support</li>
    </ul>
  </Fragment>
</ToolLayout>
<script is:inline>
function calc(){
  const area=parseFloat(document.getElementById('area').value);
  const [lo,hi]=document.getElementById('mat').value.split(',').map(Number);
  const heightExtra=parseFloat(document.getElementById('height').value);
  const railVal=document.getElementById('rail').value;
  const perimeter=Math.ceil(Math.sqrt(area)*4*0.75);// approximate
  let railLo=0,railHi=0;
  if(railVal!=='0'){const[rl,rh]=railVal.split(',').map(Number);railLo=perimeter*rl;railHi=perimeter*rh;}
  const costLow=Math.round(area*lo+railLo+heightExtra);
  const costHigh=Math.round(area*hi+railHi+heightExtra);
  document.getElementById('result').classList.remove('hidden');
  document.getElementById('res').innerHTML=`
    <div class="text-center mb-4"><div class="text-4xl font-bold text-[#FF6B35]">$${costLow.toLocaleString()} â€“ $${costHigh.toLocaleString()}</div><div class="text-sm text-gray-500">Total installed estimate</div></div>
    <div class="grid sm:grid-cols-3 gap-4">
      <div class="text-center"><div class="text-lg font-bold text-[#1B4965]">${area} ftÂ²</div><div class="text-xs text-gray-500">Deck Area</div></div>
      <div class="text-center"><div class="text-lg font-bold text-[#1B4965]">~${perimeter} ft</div><div class="text-xs text-gray-500">Railing Length</div></div>
      <div class="text-center"><div class="text-lg font-bold text-[#1B4965]">$${Math.round(costLow/area)}-$${Math.round(costHigh/area)}</div><div class="text-xs text-gray-500">Per Sq Ft</div></div>
    </div>`;
}
</script>
